"use strict";(self.webpackChunkstore_app=self.webpackChunkstore_app||[]).push([[164],{4164:(kt,q,a)=>{a.r(q),a.d(q,{AdminModule:()=>w});var h=a(6895),O=a(6582),l=a(4006),T=a(5938),f=a(1831),P=a(2453),t=a(4650),E=a(7185),R=a(8356),I=a(9066),K=a(3238),W=a(445),N=a(9549),tt=a(4144),et=a(4385),Y=a(7392),it=a(9891),j=a(5365),Z=a(6223),ot=a(4707),J=a(2722),$=a(1884),y=a(8505),nt=a(266),D=a(846);function rt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"label",3)(1,"mat-icon",4),t._uU(2,"add_photo_alternate"),t.qZA(),t.TgZ(3,"input",5,6),t.NdJ("change",function(r){t.CHM(e);const s=t.MAs(4),p=t.oxw();return t.KtG(p.onSelectFile(r,null==s?null:s.files))}),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("matTooltip",e.label)}}function st(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"app-button",14),t.NdJ("clicked",function(){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onResetImage())}),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matType",e.ButtonTypes.miniFap)("color",e.ButtonColors.warn)}}function lt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.YNc(1,st,1,2,"app-button",11),t.TgZ(2,"label",12)(3,"mat-icon",13),t._uU(4,"edit"),t.qZA(),t.TgZ(5,"input",5,6),t.NdJ("change",function(r){t.CHM(e);const s=t.MAs(6),p=t.oxw(2);return t.KtG(p.onSelectFile(r,null==s?null:s.files))}),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.showDeleteBtn)}}function ct(i,o){if(1&i&&(t.TgZ(0,"div",7),t._UZ(1,"img",8),t.YNc(2,lt,7,1,"div",9),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("src",e.image.preview,t.LSH),t.xp6(1),t.Q6J("ngIf",e.showActions)}}class g{constructor(o,e){this._fb=o,this._toastService=e,this._destroyAll$=new ot.t(1),this.showActions=!0,this.showDeleteBtn=!0,this.label="upload",this.sizeLimit=5,this.formControl=this._fb.control(null,{nonNullable:!0,validators:l.kI.required}),this.ButtonTypes=Z.qh,this.ButtonColors=Z.Tt,this.image={file:void 0,preview:null},this.onResetImage=()=>{this.image={file:void 0,preview:null}},this.onTouched=()=>{},this.registerOnChange=n=>{this.formControl.valueChanges.pipe((0,J.R)(this._destroyAll$)).subscribe(n)},this.registerOnTouched=n=>this.onTouched=n,this.setDisabledState=n=>{n?this.formControl.disable():this.formControl.enable()},this.validate=()=>this.formControl.valid?null:{invalidForm:{valid:!1,message:"Form fields are invalid"}},this._readFileAImage=n=>{const r=new FileReader;n instanceof File?(r.readAsDataURL(n),r.onload=s=>{const{result:p}=r;this.image={file:n,preview:p}}):this.image={file:void 0,preview:n},this.formControl.setValue(n),this.formControl.updateValueAndValidity()}}ngOnInit(){this.formControl.valueChanges.pipe((0,$.x)(),(0,y.b)(o=>this._readFileAImage(o)),(0,J.R)(this._destroyAll$)).subscribe()}onSelectFile(o,e){if(e?.length){const n=e[0],r=new FileReader;if(r.readAsDataURL(o?.target?.files[0]),n&&this.sizeLimit&&n.size>=1e3*this.sizeLimit*1024)return void this._toastService.error("File size is out of the range data upload (5MB) maximum");if(!n||!n.type.match(/image\/*/))return void this._toastService.error("File type is invalid");r.onload=s=>{this.formControl.setValue(n),this.formControl.updateValueAndValidity()}}}writeValue(o){o&&this.formControl.patchValue(o,{emitEvent:!0})}ngOnDestroy(){this._destroyAll$.next(void 0),this._destroyAll$.complete()}}function dt(i,o){1&i&&t._UZ(0,"mat-error")}function ut(i,o){1&i&&t._UZ(0,"mat-error")}function pt(i,o){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function mt(i,o){1&i&&t._UZ(0,"mat-error")}function ht(i,o){if(1&i&&(t.TgZ(0,"mat-form-field",4)(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-select",11),t.YNc(5,pt,2,2,"mat-option",12),t.qZA(),t.YNc(6,mt,1,0,"mat-error",7),t.qZA()),2&i){const e=o.ngIf,n=t.oxw().ngIf,r=t.oxw();let s;t.Q6J("dir",n),t.xp6(2),t.Oqu(t.lcZ(3,4,"category")),t.xp6(3),t.Q6J("ngForOf",e),t.xp6(1),t.Q6J("ngIf",(null==(s=r.addEditProductForm.get("category"))?null:s.touched)&&(null==(s=r.addEditProductForm.get("category"))?null:s.hasError("required")))}}function gt(i,o){if(1&i&&(t.TgZ(0,"form",2),t._UZ(1,"image-picker",3),t.TgZ(2,"mat-form-field",4)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"textarea",5),t.qZA(),t.TgZ(7,"mat-form-field",4)(8,"mat-label"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,dt,1,0,"mat-error",7),t.qZA(),t.TgZ(13,"mat-form-field",4)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",8),t.TgZ(18,"mat-icon",9),t._uU(19,"$"),t.qZA(),t.YNc(20,ut,1,0,"mat-error",7),t.qZA(),t.YNc(21,ht,7,6,"mat-form-field",10),t.ALo(22,"async"),t.qZA()),2&i){const e=o.ngIf,n=t.oxw();let r,s;t.Q6J("formGroup",n.addEditProductForm),t.xp6(2),t.Q6J("dir",e),t.xp6(2),t.Oqu(t.lcZ(5,10,"description")),t.xp6(3),t.Q6J("dir",e),t.xp6(2),t.Oqu(t.lcZ(10,12,"title")),t.xp6(3),t.Q6J("ngIf",(null==(r=n.addEditProductForm.get("title"))?null:r.touched)&&(null==(r=n.addEditProductForm.get("title"))?null:r.hasError("required"))),t.xp6(1),t.Q6J("dir",e),t.xp6(2),t.Oqu(t.lcZ(16,14,"price")),t.xp6(5),t.Q6J("ngIf",(null==(s=n.addEditProductForm.get("price"))?null:s.touched)&&(null==(s=n.addEditProductForm.get("price"))?null:s.errors)),t.xp6(1),t.Q6J("ngIf",t.lcZ(22,16,n.allCategories$))}}g.\u0275fac=function(o){return new(o||g)(t.Y36(l.qu),t.Y36(E._W))},g.\u0275cmp=t.Xpm({type:g,selectors:[["image-picker","formControlName",""],["image-picker","formControl",""],["image-picker","ngModel",""]],inputs:{showActions:"showActions",showDeleteBtn:"showDeleteBtn",label:"label",sizeLimit:"sizeLimit"},standalone:!0,features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>g),multi:!0},{provide:l.Cf,useExisting:(0,t.Gpc)(()=>g),multi:!0}]),t.jDz],attrs:["formControlName",""],decls:3,vars:2,consts:[[1,"flex","justify-center","items-center"],["class","flex justify-center items-center rounded-md m-0 p-[35px] border-2 border-gray-400 border-dashed bg-slate-100 cursor-pointer","for","img-input",3,"matTooltip",4,"ngIf"],["class","w-auto h-auto rounded",4,"ngIf"],["for","img-input",1,"flex","justify-center","items-center","rounded-md","m-0","p-[35px]","border-2","border-gray-400","border-dashed","bg-slate-100","cursor-pointer",3,"matTooltip"],[1,"text-[30px]","font-medium","text-gray-600","align-middle","text-center"],["id","img-input","type","file","hidden","",3,"change"],["input",""],[1,"w-auto","h-auto","rounded"],["width","245","height","130","loading","eager",3,"src"],["class","flex justify-start items-center px-0 gap-2",4,"ngIf"],[1,"flex","justify-start","items-center","px-0","gap-2"],["class","w-auto","toolTip","delete","icon","delete",3,"matType","color","clicked",4,"ngIf"],["matTooltip","edit","matTooltipPosition","above","for","img-input",1,"w-auto","flex","justify-centeritems-center","rounded-full","mat-elevation-z3","bg-gray-600","p-[8px]","cursor-pointer","m-0"],[1,"h-auto","w-auto","font-medium","text-white","text-center","align-middle"],["toolTip","delete","icon","delete",1,"w-auto",3,"matType","color","clicked"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.YNc(1,rt,5,1,"label",1),t.YNc(2,ct,3,2,"div",2),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",!(null!=e.image&&e.image.preview)),t.xp6(1),t.Q6J("ngIf",!(null==e.image||!e.image.preview)))},dependencies:[h.ez,h.O5,l.u5,l.UX,j.m,Y.Hw,nt.gM,D.r],styles:["mat-icon[_ngcontent-%COMP%]{width:auto!important;height:auto!important}"]});class _{constructor(o,e,n,r,s,p,C){this._fb=o,this.data=e,this._dialogRef=n,this._toasterService=r,this._direction=s,this._translateService=p,this._store=C,this.addEditProductForm=this._fb.group({title:new l.NI(null,{nonNullable:!0,validators:l.kI.required}),price:new l.NI(null,{nonNullable:!0,validators:[l.kI.required,l.kI.min(1)]}),category:new l.NI(null,{nonNullable:!0,validators:l.kI.required}),description:new l.NI(null,{nonNullable:!0}),image:new l.NI(null,{nonNullable:!0})}),this.allCategories$=this._store.pipe((0,f.Ys)(u=>u.products.categoryList)),this.dir$=this._direction.direction$,this.submitLoading=!1,this.onSubmit=()=>{this.submitLoading=!0,this.data?.prod?this._updateProduct():this._createNewProduct()},this._createNewProduct=()=>{this._store.dispatch((0,P.tY)({prod:{...this.addEditProductForm?.value}})),this._store.pipe((0,f.Ys)(u=>u.admin.productCreatedSuccess)).subscribe({next:u=>{"boolean"==typeof u&&(u?this._toasterService.success(this._translateService.instant("createSuccess")):this._toasterService.error(this._translateService.instant("createFailed")),this.submitLoading=!1,this.cancelHandler({}))}})},this._updateProduct=()=>{this._store.dispatch((0,P.T)({prod:{id:this.data?.prod?.id,...this.addEditProductForm?.value}})),this._store.pipe((0,f.Ys)(u=>u.admin.productUpdatedSuccess)).subscribe({next:u=>{"boolean"==typeof u&&(u?this._toasterService.success(this._translateService.instant("updatedSuccess")):this._toasterService.error(this._translateService.instant("updatedFailed")),this.submitLoading=!1,this.cancelHandler({}))}})},this.cancelHandler=u=>this._dialogRef.close(u??null)}get modalTitle(){return this._translateService.instant(this.data?.prod?"edit":"create")}ngOnInit(){this._store.dispatch((0,P._X)()),this.data?.prod&&this.addEditProductForm.patchValue({...this.data?.prod,price:this.data?.prod?.price})}}_.\u0275fac=function(o){return new(o||_)(t.Y36(l.qu),t.Y36(T.WI),t.Y36(T.so),t.Y36(E._W),t.Y36(R.m),t.Y36(I.sK),t.Y36(f.yh))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-add-edit-product"]],decls:5,vars:12,consts:[["titleIcon","shopping_basket",3,"isLoading","isValid","submitBtnText","title","cancelBtnText","submitDialog","closeDialog","cancelDialog"],["class","w-full h-full grid sm:grid-cols-2 grid-cols-1 gap-2 content-start p-0 m-0",3,"formGroup",4,"ngIf"],[1,"w-full","h-full","grid","sm:grid-cols-2","grid-cols-1","gap-2","content-start","p-0","m-0",3,"formGroup"],["formControlName","image",1,"place-self-center"],["appearance","fill",3,"dir"],["formControlName","description","matInput","","rows","10"],["formControlName","title","matInput",""],[4,"ngIf"],["formControlName","price","matInput","","type","number"],["matSuffix",""],["appearance","fill",3,"dir",4,"ngIf"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,e){1&o&&(t.TgZ(0,"app-dialog",0),t.NdJ("submitDialog",function(){return e.onSubmit()})("closeDialog",function(){return e.cancelHandler()})("cancelDialog",function(){return e.cancelHandler()}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.YNc(3,gt,23,18,"form",1),t.ALo(4,"async"),t.qZA()),2&o&&(t.Q6J("isLoading",e.submitLoading)("isValid",e.addEditProductForm.valid)("submitBtnText",t.lcZ(1,6,"save"))("title",e.modalTitle)("cancelBtnText",t.lcZ(2,8,"cancel")),t.xp6(3),t.Q6J("ngIf",t.lcZ(4,10,e.dir$)))},dependencies:[h.sg,h.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,K.ey,W.Lv,N.KE,N.hX,N.TO,N.R9,tt.Nt,et.gD,Y.Hw,it.a,g,h.Ov,I.X$]});var c=a(2289),M=a(2618),B=(()=>{return(i=B||(B={})).SMALL="400px",i.MEDIUM="600px",i.LARGE="900px",i.X_LARGE="1200px",i.FULL="95%",B;var i})(),x=(()=>{return(i=x||(x={})).SMALL="25%",i.MEDIUM="50%",i.LARGE="75%",i.X_LARGE="90%",i.FULL="98%",x;var i})(),U=(()=>{return(i=U||(U={})).SMALL="60vh",i.MEDIUM="70vh",i.LARGE="80vh",i.X_LARGE="90vh",i.FULL="95%",U;var i})(),ft=a(7579),Q=a(5698),_t=a(9300),z=a(3900),G=a(457),xt=a(8372);class vt{constructor(o){this.totalLength=void 0,this.index=0,this.size=10,this.search=null,this.pageSizeOptions=[10,20,50,100],o&&Object.keys(o).length&&Object.assign(this,o)}}class X extends vt{constructor(o){super(o),this.category="",o&&Object.keys(o).length&&Object.assign(this,o)}}class F{constructor(o,e){this.dialogRef=o,this.data=e,this.ButtonTypes=Z.qh,this.ButtonColors=Z.Tt}}F.\u0275fac=function(o){return new(o||F)(t.Y36(T.so),t.Y36(T.WI))},F.\u0275cmp=t.Xpm({type:F,selectors:[["pw-confirmation-dialog"]],decls:17,vars:10,consts:[[1,"flex","flex-col","justify-between","items-stretch","relative","overflow-hidden"],[1,"flex","justify-end","items-center"],["icon","close",1,"mt-[5px]","mx-[5px]",3,"matType","clicked"],[1,"flex","flex-row","flex-auto","items-center","sm:items-start","sm:p-4","p-2"],[1,"flex","flex-0","items-center","justify-center","w-10","h-10","sm:mx-4","mx-2","rounded-full",3,"ngClass"],[2,"height","25px","width","25px","font-size","25px"],[1,"flex","flex-col","items-start","mt-4","sm:mt-0","sm:pe-8","space-y-1","text-start"],[1,"sm:text-lg","text-sm","sm:leading-6","leading-3","sm:font-medium","font-normal"],[3,"innerText"],[1,"text-secondary","sm:text-base","text-xs","sm:font-normal","font-light"],[1,"flex","items-center","justify-center","sm:justify-start","px-4","py-[8px]","gap-3","bg-gray-50","border-2","border-gray-100","dark:bg-black","dark:bg-opacity-10"],["data-cy","confirm",1,"w-auto",3,"matType","color","clicked"],[3,"textContent"],["data-cy","cancel",1,"w-auto",3,"matType","color","clicked"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-button",2),t.NdJ("clicked",function(){return e.dialogRef.close(!1)}),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"mat-icon",5),t._uU(6,"report_gmailerrorred"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7),t._UZ(9,"span",8),t.qZA(),t.TgZ(10,"div",9),t._UZ(11,"span",8),t.qZA()()(),t.TgZ(12,"div",10)(13,"app-button",11),t.NdJ("clicked",function(){return e.dialogRef.close(!0)}),t._UZ(14,"span",12),t.qZA(),t.TgZ(15,"app-button",13),t.NdJ("clicked",function(){return e.dialogRef.close(!1)}),t._UZ(16,"span",12),t.qZA()()()),2&o&&(t.xp6(2),t.Q6J("matType",e.ButtonTypes.icon),t.xp6(2),t.Q6J("ngClass"," text-red-600 bg-red-100 dark:text-red-50 dark:bg-red-600"),t.xp6(5),t.Q6J("innerText",e.data.title),t.xp6(2),t.Q6J("innerText",e.data.message),t.xp6(2),t.Q6J("matType",e.ButtonTypes.flat)("color",e.ButtonColors.warn),t.xp6(1),t.Q6J("textContent",e.data.ok),t.xp6(1),t.Q6J("matType",e.ButtonTypes.stroked)("color",e.ButtonColors.basic),t.xp6(1),t.Q6J("textContent",e.data.close))},dependencies:[h.mk,Y.Hw,D.r]});class v{constructor(o,e,n){this.dialog=o,this._translateService=e,this._direction=n}Confirm(o,e,n,r=this._translateService.instant("cancel")){return this.dialog.open(F,{width:B.MEDIUM,direction:this._direction.direction,hasBackdrop:!0,restoreFocus:!1,disableClose:!0,closeOnNavigation:!0,data:{title:e,message:o,ok:n,close:r}}).afterClosed().pipe((0,Q.q)(1))}}v.\u0275fac=function(o){return new(o||v)(t.LFG(T.uw),t.LFG(I.sK),t.LFG(R.m))},v.\u0275prov=t.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"});class k{}k.\u0275fac=function(o){return new(o||k)},k.\u0275mod=t.oAB({type:k}),k.\u0275inj=t.cJS({providers:[v],imports:[h.ez,j.m]});var bt=a(1135);class A{constructor(o){this._breakpointObserver=o,this._currentBreakpoint=new bt.X(c.u3.Small),this.currentBreakpoint$=this._currentBreakpoint.asObservable(),this.Breakpoints=c.u3,this._breakpointObserver.observe([c.u3.XLarge,c.u3.Large,c.u3.Medium,c.u3.Small,c.u3.XSmall,"(min-width: 500px)"]).pipe((0,y.b)(e=>this._breakpointChanged()),(0,$.x)()).subscribe()}_breakpointChanged(){this._breakpointObserver.isMatched(c.u3.XLarge)&&this._currentBreakpoint.next(c.u3.XLarge),this._breakpointObserver.isMatched(c.u3.Large)?this._currentBreakpoint.next(c.u3.Large):this._breakpointObserver.isMatched(c.u3.Medium)?this._currentBreakpoint.next(c.u3.Medium):this._breakpointObserver.isMatched(c.u3.Small)?this._currentBreakpoint.next(c.u3.Small):this._breakpointObserver.isMatched(c.u3.XSmall)?this._currentBreakpoint.next(c.u3.XSmall):this._breakpointObserver.isMatched("(min-width: 500px)")&&this._currentBreakpoint.next("(min-width: 500px)")}}A.\u0275fac=function(o){return new(o||A)(t.LFG(c.Yg))},A.\u0275prov=t.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"});var Ct=a(8739),Tt=a(6709),Zt=a(6782),yt=a(1954),H=a(7836);function At(i,o){1&i&&(t._UZ(0,"th",13),t.TgZ(1,"th",13),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",13),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",13),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",13),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",13),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",13),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th",13),t._uU(20),t.ALo(21,"translate"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,7,"image")," "),t.xp6(3),t.hij(" ",t.lcZ(6,9,"title")," "),t.xp6(3),t.hij(" ",t.lcZ(9,11,"price")," "),t.xp6(3),t.hij(" ",t.lcZ(12,13,"rating")," "),t.xp6(3),t.hij(" ",t.lcZ(15,15,"count")," "),t.xp6(3),t.hij(" ",t.lcZ(18,17,"category")," "),t.xp6(3),t.hij(" ",t.lcZ(21,19,"actions")," "))}function Lt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",14),t._UZ(1,"app-button",15),t.ALo(2,"translate"),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"td",16),t._UZ(6,"img",17),t.qZA(),t.TgZ(7,"td",18),t._uU(8),t.qZA(),t.TgZ(9,"td",16),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td",16),t._UZ(13,"stars",19),t.qZA(),t.TgZ(14,"td",16),t._uU(15),t.qZA(),t.TgZ(16,"td",16),t._uU(17),t.qZA(),t.TgZ(18,"td",20),t.NdJ("click",function(r){return r.stopPropagation()}),t.TgZ(19,"div",21)(20,"app-button",22),t.NdJ("clicked",function(){const s=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.onOpenUploadModal(s))}),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"app-button",23),t.NdJ("clicked",function(){const s=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.onDeleteProduct(s))}),t.ALo(23,"translate"),t.qZA()()()}if(2&i){const e=o.$implicit,n=o.isExpanded,r=t.oxw();let s,p,C,u;t.xp6(1),t.Q6J("matType",r.ButtonTypes.icon)("toolTip",(n?t.lcZ(2,15,"hide"):t.lcZ(3,17,"show"))+" "+t.lcZ(4,19,"details"))("icon",n?"expand_less":"keyboard_arrow_down"),t.xp6(5),t.Q6J("ngSrc",null==e?null:e.image),t.xp6(2),t.hij(" ",null!==(s=null==e?null:e.title)&&void 0!==s?s:"\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640"," "),t.xp6(2),t.hij(" ",null!==(p=t.xi3(11,21,null==e?null:e.price,"1.2"))&&void 0!==p?p:"\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640","$ "),t.xp6(3),t.Q6J("rate",null==e||null==e.rating?null:e.rating.rate),t.xp6(2),t.hij(" ",null!==(C=null==e||null==e.rating?null:e.rating.count)&&void 0!==C?C:"\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640"," "),t.xp6(2),t.hij(" ",null!==(u=null==e?null:e.category)&&void 0!==u?u:"\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640"," "),t.xp6(3),t.Q6J("matType",r.ButtonTypes.miniFap)("color",r.ButtonColors.primary)("toolTip",t.lcZ(21,24,"edit")),t.xp6(2),t.Q6J("color",r.ButtonColors.warn)("matType",r.ButtonTypes.miniFap)("toolTip",t.lcZ(23,26,"delete"))}}function wt(i,o){if(1&i&&(t.TgZ(0,"div",24)(1,"span",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&i){const e=o.$implicit;let n;t.xp6(2),t.Oqu(t.lcZ(3,2,"description")),t.xp6(3),t.Oqu(null!==(n=null==e?null:e.description)&&void 0!==n?n:"\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640\u0640")}}function St(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-paginator",28),t.NdJ("page",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onPageChange(r))}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("length",e.tableConfig.totalLength)("pageSize",e.tableConfig.size)("pageSizeOptions",e.tableConfig.pageSizeOptions)}}function Pt(i,o){if(1&i&&(t.TgZ(0,"div",26),t.YNc(1,St,1,3,"mat-paginator",27),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!!e.tableConfig)}}function It(i,o){1&i&&(t._UZ(0,"no-data",29),t.ALo(1,"translate")),2&i&&t.Q6J("text",t.lcZ(1,1,"noData"))}class L{constructor(o,e,n,r,s,p,C,u,Ut){this._fb=o,this._router=e,this._route=n,this._dialog=r,this._confirmService=s,this._breakpointObserver=p,this._toasterService=C,this._translateService=u,this._store=Ut,this._unsubscribe$=new ft.x,this.search=this._fb.control(null),this.tableConfig=new X,this.productsLoaded=!1,this.productsList=[],this.ButtonTypes=Z.qh,this.ButtonColors=Z.Tt,this.screenSize="",this.onOpenAddModal=()=>{this._dialog.open(_,{width:this.screenSize===c.u3.Small||this.screenSize===c.u3.XSmall?x.FULL:x.MEDIUM,height:U.X_LARGE,hasBackdrop:!0,disableClose:!0,closeOnNavigation:!0,restoreFocus:!1})},this.onOpenUploadModal=d=>{this._dialog.open(_,{width:this.screenSize===c.u3.Small||this.screenSize===c.u3.XSmall?x.FULL:x.MEDIUM,height:U.X_LARGE,hasBackdrop:!0,disableClose:!0,closeOnNavigation:!0,restoreFocus:!1,data:{prod:d}})},this.onDeleteProduct=d=>{this._confirmService.Confirm(`${this._translateService.instant("from")+" "+this._translateService.instant("delete")} (${d.title.split("").slice(0,40).join("")}...) ?`,this._translateService.instant("sure"),this._translateService.instant("delete")).pipe((0,Q.q)(1),(0,_t.h)(m=>!!m),(0,y.b)(()=>this._store.dispatch((0,P.K2)({prod:d}))),(0,z.w)(()=>this._store.pipe((0,f.Ys)(m=>m.admin.productDeletedSuccess)))).subscribe({next:m=>{"boolean"==typeof m&&(m?this._toasterService.success(this._translateService.instant("deleteSuccess")):this._toasterService.error(this._translateService.instant("deleteFailed")))}})},this.onPageChange=d=>{(0,G.D)(this._router.navigate([],{queryParams:{index:d.pageIndex||null,size:d.pageSize||null},queryParamsHandling:"merge"})).pipe((0,Q.q)(1)).subscribe()},this._searchChangeHandler=()=>{this.search.valueChanges.pipe((0,xt.b)(500),(0,z.w)(d=>(0,G.D)(this._router.navigate([],{queryParams:{search:d||null},queryParamsHandling:"merge"}))),(0,J.R)(this._unsubscribe$)).subscribe()},this._paramsChanges=()=>{this._route.queryParamMap.pipe((0,y.b)(d=>{const m={index:M.T.indexPage(d,"index"),size:M.T.indexSize(d,"size"),search:M.T.search(d,"search")};this.tableConfig=new X({...this.tableConfig,...m}),this.search.patchValue(m?.search)}),(0,z.w)(()=>this._getProducts()),(0,J.R)(this._unsubscribe$)).subscribe()},this._getProducts=()=>{this.productsLoaded=!1;const{index:d,size:m,search:V}=this.tableConfig;return this._store.pipe((0,f.Ys)(S=>S.admin.productsList)).pipe((0,y.b)(S=>{S?.length&&(this.productsList=(V?S.filter(Ft=>Ft?.title?.toLowerCase().includes(V?.toLowerCase())):S)?.slice(d?d*m:0,d?d*m+10:m),this.tableConfig.totalLength=S.length,this.productsLoaded=!0)}))},this._screenSizeHandler=()=>{this._breakpointObserver.currentBreakpoint$.pipe((0,y.b)(d=>this.screenSize=d),(0,J.R)(this._unsubscribe$)).subscribe()}}ngOnInit(){this._store.dispatch((0,P.ek)()),this._screenSizeHandler(),this._paramsChanges(),this._searchChangeHandler()}ngOnDestroy(){this._unsubscribe$.next(!0),this._unsubscribe$.complete()}}L.\u0275fac=function(o){return new(o||L)(t.Y36(l.qu),t.Y36(O.F0),t.Y36(O.gz),t.Y36(T.uw),t.Y36(v),t.Y36(A),t.Y36(E._W),t.Y36(I.sK),t.Y36(f.yh))},L.\u0275cmp=t.Xpm({type:L,selectors:[["products-list"]],decls:20,vars:13,consts:[[1,"w-full","h-full","flex","flex-col","justify-center","items-stretch"],[1,"h-32","bg-blue-200"],[1,"flex","justify-center","items-start"],[1,"sm:w-11/12","w-full","flex","flex-col","justify-center","items-stretch","sm:gap-2","gap-1","-mt-28"],[1,"flex","flex-wrap","justify-between","items-center"],["outlineOption","2.5px solid #03a9f4",1,"sm:h-11","h-8",3,"formControl","placeholder"],["btnClass","bg-gray-600 outline-none text-white text-lg py-1 shadow-md","icon","post_add",3,"matType","color","text","clicked"],[1,"table-scrollable","max-h-[77vh]","shadow-md","bg-white",3,"data","dataLoaded","extendable","colSpanCount"],["headers",""],["rows",""],["extendableArea",""],["pagination",""],["noData",""],[1,"sm:text-[14px]","text-xs","text-start"],[1,"sm:text-[14px]","text-xs","break-words"],["btnClass","text-gray-600",3,"matType","toolTip","icon"],[1,"sm:text-[15px]","text-xs","break-words"],["width","100","height","80","loading","eager",1,"rounded-xl","border-2","border-gray-200","shadow-md","hover:scale-150",3,"ngSrc"],[1,"max-w-[300px]","sm:text-[14px]","leading-5","text-xs","break-words"],[3,"rate"],[3,"click"],[1,"h-full","w-auto","flex","justify-start","items-center","sm:gap-2","gap-[3px]"],["btnClass","bg-gray-600 text-white","icon","edit_note",3,"matType","color","toolTip","clicked"],["icon","delete",3,"color","matType","toolTip","clicked"],[1,"min-h-min","flex","flex-col","justify-start","items-start","gap-1","md:p-10","p-4","bg-slate-50","text-gray-600"],[1,"text-start","text-lg","font-semibold"],[1,"h-auto","w-full","bg-white","flex","justify-end","items-center","px-2"],["class","w-1/2","panelClass","bg-transparent",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["panelClass","bg-transparent",1,"w-1/2",3,"length","pageSize","pageSizeOptions","page"],[3,"text"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"magic-search-input",5),t.ALo(6,"translate"),t.TgZ(7,"app-button",6),t.NdJ("clicked",function(){return e.onOpenAddModal()}),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"app-table",7),t.YNc(10,At,22,21,"ng-template",null,8,t.W1O),t.YNc(12,Lt,24,28,"ng-template",null,9,t.W1O),t.YNc(14,wt,6,4,"ng-template",null,10,t.W1O),t.YNc(16,Pt,2,1,"ng-template",null,11,t.W1O),t.YNc(18,It,2,3,"ng-template",null,12,t.W1O),t.qZA()()()()),2&o&&(t.xp6(5),t.Q6J("formControl",e.search)("placeholder",t.lcZ(6,9,"search")+"..."),t.xp6(2),t.Q6J("matType",e.ButtonTypes.round_stroked)("color",e.ButtonColors.primary)("text",t.lcZ(8,11,"create")),t.xp6(2),t.Q6J("data",e.productsList)("dataLoaded",e.productsLoaded)("extendable",!0)("colSpanCount",9))},dependencies:[h.O5,l.JJ,l.oH,Ct.NW,Tt.a,Zt.U,h.Zd,D.r,yt.d,H._,h.JJ,I.X$]});const Jt=[{path:"",component:L}];class b{}b.Component=[L,_],b.\u0275fac=function(o){return new(o||b)},b.\u0275mod=t.oAB({type:b}),b.\u0275inj=t.cJS({imports:[O.Bz.forChild(Jt),O.Bz]});class w{}w.\u0275fac=function(o){return new(o||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[h.ez,b,j.m,g,H._]})}}]);